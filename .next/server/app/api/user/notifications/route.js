"use strict";(()=>{var r={};r.id=69,r.ids=[69],r.modules={517:r=>{r.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:r=>{r.exports=require("buffer")},6113:r=>{r.exports=require("crypto")},2781:r=>{r.exports=require("stream")},3837:r=>{r.exports=require("util")},450:(r,e,t)=>{t.r(e),t.d(e,{headerHooks:()=>m,originalPathname:()=>j,patchFetch:()=>y,requestAsyncStorage:()=>f,routeModule:()=>p,serverHooks:()=>v,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>g});var i={};t.r(i),t.d(i,{GET:()=>d,PATCH:()=>l});var o=t(5419),n=t(9108),a=t(9678),s=t(8070),u=t(8093),c=t(3205);async function d(r){try{let e=r.headers.get("authorization");if(!e||!e.startsWith("Bearer "))return s.Z.json({error:"Token de autenticaci\xf3n requerido"},{status:401});let t=e.substring(7),i=(0,c.WX)(t);if(!i)return s.Z.json({error:"Token inv\xe1lido"},{status:401});let o=await u._.notification.findMany({where:{userId:i.userId},orderBy:{createdAt:"desc"}});return s.Z.json({notifications:o})}catch(r){return console.error("Error al obtener notificaciones:",r),s.Z.json({error:"Error interno del servidor"},{status:500})}}async function l(r){try{let{notificationId:e}=await r.json(),t=r.headers.get("authorization");if(!t||!t.startsWith("Bearer "))return s.Z.json({error:"Token de autenticaci\xf3n requerido"},{status:401});let i=t.substring(7),o=(0,c.WX)(i);if(!o)return s.Z.json({error:"Token inv\xe1lido"},{status:401});let n=await u._.notification.update({where:{id:e,userId:o.userId},data:{read:!0}});return s.Z.json({notification:n})}catch(r){return console.error("Error al marcar notificaci\xf3n:",r),s.Z.json({error:"Error interno del servidor"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/user/notifications/route",pathname:"/api/user/notifications",filename:"route",bundlePath:"app/api/user/notifications/route"},resolvedPagePath:"C:\\Users\\Yessica\\Desktop\\auction-master\\app\\api\\user\\notifications\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:v,headerHooks:m,staticGenerationBailout:g}=p,j="/api/user/notifications/route";function y(){return(0,a.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:h})}},3205:(r,e,t)=>{t.d(e,{WX:()=>n}),t(6521);var i=t(6082),o=t.n(i);t(8093);let n=r=>{try{return o().verify(r,process.env.JWT_SECRET)}catch{return null}}},8093:(r,e,t)=>{t.d(e,{_:()=>o});let i=require("@prisma/client"),o=globalThis.prisma??new i.PrismaClient}};var e=require("../../../../webpack-runtime.js");e.C(r);var t=r=>e(e.s=r),i=e.X(0,[638,206,928],()=>t(450));module.exports=i})();