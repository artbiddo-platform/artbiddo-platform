"use strict";(()=>{var e={};e.id=840,e.ids=[840],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},4286:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>k,originalPathname:()=>w,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>v});var n={};r.r(n),r.d(n,{DELETE:()=>l,PUT:()=>c});var a=r(5419),i=r(9108),o=r(9678),s=r(8070),u=r(8093),d=r(3205);async function c(e,{params:t}){try{let r;let n=e.headers.get("authorization");if(!n||!n.startsWith("Bearer "))return s.Z.json({error:"Token de autenticaci\xf3n requerido"},{status:401});let a=n.substring(7),i=(0,d.WX)(a);if(!i)return s.Z.json({error:"Token inv\xe1lido"},{status:401});let o=await u._.user.findUnique({where:{id:i.userId}});if(!o||"ADMIN"!==o.role)return s.Z.json({error:"Acceso denegado"},{status:403});let{type:c,data:l}=await e.json(),{id:p}=t;switch(c){case"pageContent":r=await u._.pageContent.update({where:{id:p},data:{page:l.page,section:l.section,title:l.title,subtitle:l.subtitle,description:l.description,content:l.content,image:l.image,link:l.link,order:l.order,isActive:l.isActive}});break;case"siteSettings":r=await u._.siteSettings.update({where:{id:p},data:{key:l.key,value:l.value,type:l.type,description:l.description,isPublic:l.isPublic}});break;case"contentBlock":r=await u._.contentBlock.update({where:{id:p},data:{name:l.name,title:l.title,content:l.content,type:l.type,metadata:l.metadata,isActive:l.isActive}});break;default:return s.Z.json({error:"Tipo de contenido no v\xe1lido"},{status:400})}return s.Z.json({message:"Contenido actualizado exitosamente",data:r})}catch(e){return console.error("Error al actualizar contenido:",e),s.Z.json({error:"Error interno del servidor"},{status:500})}}async function l(e,{params:t}){try{let r;let n=e.headers.get("authorization");if(!n||!n.startsWith("Bearer "))return s.Z.json({error:"Token de autenticaci\xf3n requerido"},{status:401});let a=n.substring(7),i=(0,d.WX)(a);if(!i)return s.Z.json({error:"Token inv\xe1lido"},{status:401});let o=await u._.user.findUnique({where:{id:i.userId}});if(!o||"ADMIN"!==o.role)return s.Z.json({error:"Acceso denegado"},{status:403});let{type:c}=await e.json(),{id:l}=t;switch(c){case"pageContent":r=await u._.pageContent.delete({where:{id:l}});break;case"siteSettings":r=await u._.siteSettings.delete({where:{id:l}});break;case"contentBlock":r=await u._.contentBlock.delete({where:{id:l}});break;default:return s.Z.json({error:"Tipo de contenido no v\xe1lido"},{status:400})}return s.Z.json({message:"Contenido eliminado exitosamente",data:r})}catch(e){return console.error("Error al eliminar contenido:",e),s.Z.json({error:"Error interno del servidor"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/admin/content/[id]/route",pathname:"/api/admin/content/[id]",filename:"route",bundlePath:"app/api/admin/content/[id]/route"},resolvedPagePath:"C:\\Users\\Yessica\\Desktop\\auction-master\\app\\api\\admin\\content\\[id]\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:g,headerHooks:k,staticGenerationBailout:v}=p,w="/api/admin/content/[id]/route";function f(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},3205:(e,t,r)=>{r.d(t,{WX:()=>i}),r(6521);var n=r(6082),a=r.n(n);r(8093);let i=e=>{try{return a().verify(e,process.env.JWT_SECRET)}catch{return null}}},8093:(e,t,r)=>{r.d(t,{_:()=>a});let n=require("@prisma/client"),a=globalThis.prisma??new n.PrismaClient}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,206,928],()=>r(4286));module.exports=n})();