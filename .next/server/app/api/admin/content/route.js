"use strict";(()=>{var e={};e.id=710,e.ids=[710],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},5997:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>k,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>f});var n={};r.r(n),r.d(n,{GET:()=>d,POST:()=>l});var a=r(5419),o=r(9108),i=r(9678),s=r(8070),u=r(8093),c=r(3205);async function d(e){try{let t=e.headers.get("authorization");if(!t||!t.startsWith("Bearer "))return s.Z.json({error:"Token de autenticaci\xf3n requerido"},{status:401});let r=t.substring(7),n=(0,c.WX)(r);if(!n)return s.Z.json({error:"Token inv\xe1lido"},{status:401});let a=await u._.user.findUnique({where:{id:n.userId}});if(!a||"ADMIN"!==a.role)return s.Z.json({error:"Acceso denegado"},{status:403});let[o,i,d]=await Promise.all([u._.pageContent.findMany({orderBy:[{page:"asc"},{order:"asc"}]}),u._.siteSettings.findMany({orderBy:{key:"asc"}}),u._.contentBlock.findMany({orderBy:{name:"asc"}})]);return s.Z.json({pageContent:o,siteSettings:i,contentBlocks:d})}catch(e){return console.error("Error al obtener contenido:",e),s.Z.json({error:"Error interno del servidor"},{status:500})}}async function l(e){try{let t;let r=e.headers.get("authorization");if(!r||!r.startsWith("Bearer "))return s.Z.json({error:"Token de autenticaci\xf3n requerido"},{status:401});let n=r.substring(7),a=(0,c.WX)(n);if(!a)return s.Z.json({error:"Token inv\xe1lido"},{status:401});let o=await u._.user.findUnique({where:{id:a.userId}});if(!o||"ADMIN"!==o.role)return s.Z.json({error:"Acceso denegado"},{status:403});let{type:i,data:d}=await e.json();switch(i){case"pageContent":t=await u._.pageContent.create({data:{page:d.page,section:d.section,title:d.title,subtitle:d.subtitle,description:d.description,content:d.content,image:d.image,link:d.link,order:d.order||0}});break;case"siteSettings":t=await u._.siteSettings.create({data:{key:d.key,value:d.value,type:d.type||"text",description:d.description,isPublic:d.isPublic||!1}});break;case"contentBlock":t=await u._.contentBlock.create({data:{name:d.name,title:d.title,content:d.content,type:d.type||"TEXT",metadata:d.metadata}});break;default:return s.Z.json({error:"Tipo de contenido no v\xe1lido"},{status:400})}return s.Z.json({message:"Contenido creado exitosamente",data:t})}catch(e){return console.error("Error al crear contenido:",e),s.Z.json({error:"Error interno del servidor"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/content/route",pathname:"/api/admin/content",filename:"route",bundlePath:"app/api/admin/content/route"},resolvedPagePath:"C:\\Users\\Yessica\\Desktop\\auction-master\\app\\api\\admin\\content\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:h,headerHooks:y,staticGenerationBailout:f}=p,k="/api/admin/content/route";function v(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},3205:(e,t,r)=>{r.d(t,{WX:()=>o}),r(6521);var n=r(6082),a=r.n(n);r(8093);let o=e=>{try{return a().verify(e,process.env.JWT_SECRET)}catch{return null}}},8093:(e,t,r)=>{r.d(t,{_:()=>a});let n=require("@prisma/client"),a=globalThis.prisma??new n.PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,206,928],()=>r(5997));module.exports=n})();